/*
  <%= pkg.title || pkg.name %> <%= pkg.version %><%= pkg.homepage ? " <" + pkg.homepage + ">" : "" %>
  Copyright (c) <%= grunt.template.today("yyyy") %> <%= pkg.author.name %>

  Released under <%= _.pluck(pkg.licenses, "type").join(", ") %> License
*/

!function(q,X,_){"use strict";var a,e,o,i,s,Y={};function l(t,e,n){var r,a=t.runtimeStyle&&t.runtimeStyle[e],o=t.style;return!/^-?[0-9]+\.?[0-9]*(?:px)?$/i.test(n)&&/^-?\d/.test(n)&&(r=o.left,a&&(t.runtimeStyle.left=t.currentStyle.left),o.left="fontSize"===e?"1em":n||0,n=o.pixelLeft+"px",o.left=r,a&&(t.runtimeStyle.left=a)),/^(thin|medium|thick)$/i.test(n)?n:Math.round(parseFloat(n))+"px"}function c(t){return parseInt(t,10)}function d(t,e,n,r,a,o){var i,l,s,e=Y.Util.getCSS(e,t,a);return 1===e.length&&(a=e[0],(e=[])[0]=a,e[1]=a),-1!==e[0].toString().indexOf("%")?(i=parseFloat(e[0])/100,l=n.width*i,"backgroundSize"!==t&&(l-=(o||r).width*i)):"backgroundSize"===t?"auto"===e[0]?l=r.width:/contain|cover/.test(e[0])?(l=(s=Y.Util.resizeBounds(r.width,r.height,n.width,n.height,e[0])).width,s=s.height):l=parseInt(e[0],10):l=parseInt(e[0],10),"auto"===e[1]?s=l/r.width*r.height:-1!==e[1].toString().indexOf("%")?(i=parseFloat(e[1])/100,s=n.height*i,"backgroundSize"!==t&&(s-=(o||r).height*i)):s=parseInt(e[1],10),[l,s]}Y.Util={},Y.Util.log=function(t){Y.logging&&q.console&&q.console.log&&q.console.log(t)},Y.Util.trimText=(e=String.prototype.trim,function(t){return e?e.apply(t):((t||"")+"").replace(/^\s+|\s+$/g,"")}),Y.Util.asFloat=function(t){return parseFloat(t)},o=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,i=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,Y.Util.parseTextShadows=function(t){if(!t||"none"===t)return[];for(var e=t.match(o),n=[],r=0;e&&r<e.length;r++){var a=e[r].match(i);n.push({color:a[0],offsetX:a[1]?a[1].replace("px",""):0,offsetY:a[2]?a[2].replace("px",""):0,blur:a[3]?a[3].replace("px",""):0})}return n},Y.Util.parseBackgroundImage=function(t){function e(){n&&('"'===r.substr(0,1)&&(r=r.substr(1,r.length-2)),r&&c.push(r),"-"===n.substr(0,1)&&0<(o=n.indexOf("-",1)+1)&&(a=n.substr(0,o),n=n.substr(o)),d.push({prefix:a,method:n.toLowerCase(),value:i,args:c})),c=[],n=a=r=i=""}var n,r,a,o,i,l,s,c,d=[],h=0,u=0;e();for(var f=0,p=t.length;f<p;f++)if(l=t[f],!(0===h&&-1<" \r\n\t".indexOf(l))){switch(l){case'"':s?s===l&&(s=null):s=l;break;case"(":if(s)break;if(0===h){h=1,i+=l;continue}u++;break;case")":if(s)break;if(1===h){if(0===u){h=0,i+=l,e();continue}u--}break;case",":if(s)break;if(0===h){e();continue}if(1!==h||0!==u||n.match(/^url$/i))break;c.push(r),r="",i+=l;continue}i+=l,0===h?n+=l:r+=l}return e(),d},Y.Util.Bounds=function(t){var e,n={};return t.getBoundingClientRect&&(e=t.getBoundingClientRect(),n.top=e.top,n.bottom=e.bottom||e.top+e.height,n.left=e.left,n.width=t.offsetWidth,n.height=t.offsetHeight),n},Y.Util.OffsetBounds=function(t){var e=t.offsetParent?Y.Util.OffsetBounds(t.offsetParent):{top:0,left:0};return{top:t.offsetTop+e.top,bottom:t.offsetTop+t.offsetHeight+e.top,left:t.offsetLeft+e.left,width:t.offsetWidth,height:t.offsetHeight}},Y.Util.getCSS=function(t,e,n){void 0!==t&&(a=X.defaultView.getComputedStyle(t,null));var r=a[e];if(/^background(Size|Position)$/.test(e))return function(t,e,n,r){if(t=(t=(t||"").split(","))[r||0]||t[0]||"auto",t=Y.Util.trimText(t).split(" "),"backgroundSize"!==n||t[0]&&!t[0].match(/cover|contain|auto/)){if(t[0]=-1===t[0].indexOf("%")?l(e,n+"X",t[0]):t[0],t[1]===_){if("backgroundSize"===n)return t[1]="auto",t;t[1]=t[0]}t[1]=-1===t[1].indexOf("%")?l(e,n+"Y",t[1]):t[1]}else;return t}(r,t,e,n);if(/border(Top|Bottom)(Left|Right)Radius/.test(e)){e=r.split(" ");return e.length<=1&&(e[1]=e[0]),e.map(c)}return r},Y.Util.resizeBounds=function(t,e,n,r,a){var o,i,e=t/e;return a&&"auto"!==a?n/r<e^"contain"===a?o=(i=r)*e:i=(o=n)/e:(o=n,i=r),{width:o,height:i}},Y.Util.BackgroundPosition=function(t,e,n,r,a){a=d("backgroundPosition",t,e,n,r,a);return{left:a[0],top:a[1]}},Y.Util.BackgroundSize=function(t,e,n,r){r=d("backgroundSize",t,e,n,r);return{width:r[0],height:r[1]}},Y.Util.Extend=function(t,e){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},Y.Util.Children=function(t){var e,n,r;try{e=t.nodeName&&"IFRAME"===t.nodeName.toUpperCase()?t.contentDocument||t.contentWindow.document:(n=t.childNodes,r=[],null!==n&&function(t,e){var n=t.length,r=0;if("number"==typeof e.length)for(var a=e.length;r<a;r++)t[n++]=e[r];else for(;e[r]!==_;)t[n++]=e[r++];t.length=n}(r,n),r)}catch(t){Y.Util.log("html2canvas.Util.Children failed with exception: "+t.message),e=[]}return e},Y.Util.isTransparent=function(t){return"transparent"===t||"rgba(0, 0, 0, 0)"===t},Y.Util.Font=(s={},function(t,e,n){if(s[t+"-"+e]!==_)return s[t+"-"+e];var r,a=n.createElement("div"),o=n.createElement("img"),i=n.createElement("span"),l="Hidden Text";return a.style.visibility="hidden",a.style.fontFamily=t,a.style.fontSize=e,a.style.margin=0,a.style.padding=0,n.body.appendChild(a),o.src="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACwAAAAAAQABAAACAkQBADs=",o.width=1,o.height=1,o.style.margin=0,o.style.padding=0,o.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=e,i.style.margin=0,i.style.padding=0,i.appendChild(n.createTextNode(l)),a.appendChild(i),a.appendChild(o),r=o.offsetTop-i.offsetTop+1,a.removeChild(i),a.appendChild(n.createTextNode(l)),a.style.lineHeight="normal",o.style.verticalAlign="super",o={baseline:r,lineWidth:1,middle:o.offsetTop-a.offsetTop+1},s[t+"-"+e]=o,n.body.removeChild(a),o}),function(){var n=Y.Util,t={};Y.Generate=t;var g=[/^(-webkit-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-linear-gradient)\(([a-z\s]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-gradient)\((linear|radial),\s((?:\d{1,3}%?)\s(?:\d{1,3}%?),\s(?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)\-]+)\)$/,/^(-moz-linear-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?))([\w\d\.\s,%\(\)]+)\)$/,/^(-webkit-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/,/^(-moz-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s?([a-z\-]*)([\w\d\.\s,%\(\)]+)\)$/,/^(-o-radial-gradient)\(((?:\d{1,3}%?)\s(?:\d{1,3}%?)),\s(\w+)\s([a-z\-]+)([\w\d\.\s,%\(\)]+)\)$/];function s(t){return function(e){try{t.addColorStop(e.stop,e.color)}catch(t){n.log(["failed to add color stop: ",t,"; tried to add: ",e])}}}t.parseGradient=function(t,e){for(var n,r,a,o,i,l,s,c,d,h,u,f=g.length,p=0;p<f&&!(r=t.match(g[p]));p+=1);if(r)switch(r[1]){case"-webkit-linear-gradient":case"-o-linear-gradient":if(n={type:"linear",x0:null,y0:null,x1:null,y1:null,colorStops:[]},o=r[2].match(/\w+/g))for(i=o.length,p=0;p<i;p+=1)switch(o[p]){case"top":n.y0=0,n.y1=e.height;break;case"right":n.x0=e.width,n.x1=0;break;case"bottom":n.y0=e.height,n.y1=0;break;case"left":n.x0=0,n.x1=e.width}if(null===n.x0&&null===n.x1&&(n.x0=n.x1=e.width/2),null===n.y0&&null===n.y1&&(n.y0=n.y1=e.height/2),o=r[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=o.length,l=1/Math.max(i-1,1),p=0;p<i;p+=1)(s=o[p].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/))[2]?(a=parseFloat(s[2]),"%"===s[3]?a/=100:a/=e.width):a=p*l,n.colorStops.push({color:s[1],stop:a});break;case"-webkit-gradient":if(n={type:"radial"===r[2]?"circle":r[2],x0:0,y0:0,x1:0,y1:0,colorStops:[]},(o=r[3].match(/(\d{1,3})%?\s(\d{1,3})%?,\s(\d{1,3})%?\s(\d{1,3})%?/))&&(n.x0=o[1]*e.width/100,n.y0=o[2]*e.height/100,n.x1=o[3]*e.width/100,n.y1=o[4]*e.height/100),o=r[4].match(/((?:from|to|color-stop)\((?:[0-9\.]+,\s)?(?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)\))+/g))for(i=o.length,p=0;p<i;p+=1)s=o[p].match(/(from|to|color-stop)\(([0-9\.]+)?(?:,\s)?((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\)/),a=parseFloat(s[2]),"from"===s[1]&&(a=0),"to"===s[1]&&(a=1),n.colorStops.push({color:s[3],stop:a});break;case"-moz-linear-gradient":if(n={type:"linear",x0:0,y0:0,x1:0,y1:0,colorStops:[]},(o=r[2].match(/(\d{1,3})%?\s(\d{1,3})%?/))&&(n.x0=o[1]*e.width/100,n.y0=o[2]*e.height/100,n.x1=e.width-n.x0,n.y1=e.height-n.y0),o=r[3].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}%)?)+/g))for(i=o.length,l=1/Math.max(i-1,1),p=0;p<i;p+=1)(s=o[p].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%)?/))[2]?(a=parseFloat(s[2]),s[3]&&(a/=100)):a=p*l,n.colorStops.push({color:s[1],stop:a});break;case"-webkit-radial-gradient":case"-moz-radial-gradient":case"-o-radial-gradient":if(n={type:"circle",x0:0,y0:0,x1:e.width,y1:e.height,cx:0,cy:0,rx:0,ry:0,colorStops:[]},(o=r[2].match(/(\d{1,3})%?\s(\d{1,3})%?/))&&(n.cx=o[1]*e.width/100,n.cy=o[2]*e.height/100),o=r[3].match(/\w+/),s=r[4].match(/[a-z\-]*/),o&&s)switch(s[0]){case"farthest-corner":case"cover":case"":c=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),h=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),u=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.max(c,d,h,u);break;case"closest-corner":c=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.cy,2)),d=Math.sqrt(Math.pow(n.cx,2)+Math.pow(n.y1-n.cy,2)),h=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.y1-n.cy,2)),u=Math.sqrt(Math.pow(n.x1-n.cx,2)+Math.pow(n.cy,2)),n.rx=n.ry=Math.min(c,d,h,u);break;case"farthest-side":"circle"===o[0]?n.rx=n.ry=Math.max(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=o[0],n.rx=Math.max(n.cx,n.x1-n.cx),n.ry=Math.max(n.cy,n.y1-n.cy));break;case"closest-side":case"contain":"circle"===o[0]?n.rx=n.ry=Math.min(n.cx,n.cy,n.x1-n.cx,n.y1-n.cy):(n.type=o[0],n.rx=Math.min(n.cx,n.x1-n.cx),n.ry=Math.min(n.cy,n.y1-n.cy))}if(o=r[5].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\)(?:\s\d{1,3}(?:%|px))?)+/g))for(i=o.length,l=1/Math.max(i-1,1),p=0;p<i;p+=1)(s=o[p].match(/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/))[2]?(a=parseFloat(s[2]),"%"===s[3]?a/=100:a/=e.width):a=p*l,n.colorStops.push({color:s[1],stop:a})}return n},t.Gradient=function(t,e){if(0!==e.width&&0!==e.height){var n,r,a=X.createElement("canvas"),o=a.getContext("2d");if(a.width=e.width,a.height=e.height,n=Y.Generate.parseGradient(t,e))switch(n.type){case"linear":r=o.createLinearGradient(n.x0,n.y0,n.x1,n.y1),n.colorStops.forEach(s(r)),o.fillStyle=r,o.fillRect(0,0,e.width,e.height);break;case"circle":r=o.createRadialGradient(n.cx,n.cy,0,n.cx,n.cy,n.rx),n.colorStops.forEach(s(r)),o.fillStyle=r,o.fillRect(0,0,e.width,e.height);break;case"ellipse":var i=X.createElement("canvas"),l=i.getContext("2d"),t=Math.max(n.rx,n.ry),e=2*t;i.width=i.height=e,r=l.createRadialGradient(n.rx,n.ry,0,n.rx,n.ry,t),n.colorStops.forEach(s(r)),l.fillStyle=r,l.fillRect(0,0,e,e),o.fillStyle=n.colorStops[n.colorStops.length-1].color,o.fillRect(0,0,a.width,a.height),o.drawImage(i,n.cx-n.rx,n.cy-n.ry,2*n.rx,2*n.ry)}return a}},t.ListAlpha=function(t){for(var e,n="";e=t%26,n=String.fromCharCode(64+e)+n,26<26*(t/=26););return n},t.ListRoman=function(t){var e,n=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],r=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],a="",o=n.length;if(t<=0||4e3<=t)return t;for(e=0;e<o;e+=1)for(;r[e]<=t;)t-=r[e],a+=n[e];return a}}(),Y.Parse=function(e,u){q.scroll(0,0);var t=u.elements===_?X.body:u.elements[0],f=t.ownerDocument,p=Y.Util,s=p.Support(u,f),g=new RegExp("("+u.ignoreElements+")"),a=f.body,U=p.getCSS,m="___html2canvas___pseudoelement",n=f.createElement("style");function y(t,e){e=parseInt(U(t,e),10);return isNaN(e)?0:e}function b(t,e,n,r,a,o){"transparent"!==o&&(t.setVariable("fillStyle",o),t.fillRect(e,n,r,a),0)}function d(t,e,n){if(0<t.length)return e+n.toUpperCase()}function h(t,e,n,r){null!==t&&0<p.trimText(t).length&&(r.fillText(t,e,n),0)}function w(t,e,n,r){var a=U(e,"fontWeight"),o=U(e,"fontFamily"),i=U(e,"fontSize"),l=p.parseTextShadows(U(e,"textShadow"));switch(parseInt(a,10)){case 401:a="bold";break;case 400:a="normal"}if(t.setVariable("fillStyle",r),t.setVariable("font",[U(e,"fontStyle"),U(e,"fontVariant"),a,i,o].join(" ")),t.setVariable("textAlign","left"),l.length&&(t.setVariable("shadowColor",l[0].color),t.setVariable("shadowOffsetX",l[0].offsetX),t.setVariable("shadowOffsetY",l[0].offsetY),t.setVariable("shadowBlur",l[0].blur)),"none"!==n)return p.Font(o,i,f)}function x(t,e,n,r,a){var o,i,l;return s.rangeBounds&&!a?("none"===n&&0===p.trimText(e).length||(o=e,i=t.node,n=t.textOffset,(l=f.createRange()).setStart(i,n),l.setEnd(i,n+o.length),l=l.getBoundingClientRect()),t.textOffset+=e.length):t.node&&"string"==typeof t.node.nodeValue&&(e=r?t.node.splitText(e.length):null,l=function(t,e){var n=t.parentNode,r=f.createElement("wrapper"),a=t.cloneNode(!0);r.appendChild(t.cloneNode(!0)),n.replaceChild(r,t);e=e?p.OffsetBounds(r):p.Bounds(r);return n.replaceChild(a,r),e}(t.node,a),t.node=e),l}function o(t,e,n){var r,a,o=n.ctx,i=U(t,"color"),l=U(t,"textDecoration"),s=U(t,"textAlign"),c={node:e,textOffset:0};0<p.trimText(e.nodeValue).length&&(e.nodeValue=function(t,e){switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,d);case"uppercase":return t.toUpperCase();default:return t}}(e.nodeValue,U(t,"textTransform")),s=s.replace(["-webkit-auto"],["auto"]),a=!u.letterRendering&&/^(left|right|justify|auto)$/.test(s)&&/^(normal|none|0px)$/.test(U(t,"letterSpacing"))?e.nodeValue.split(/(\b| )/):e.nodeValue.split(""),r=w(o,t,l,i),u.chinese&&a.forEach(function(t,e){/.*[\u4E00-\u9FA5].*$/.test(t)&&((t=t.split("")).unshift(e,1),a.splice.apply(a,t))}),a.forEach(function(t,e){e=x(c,t,l,e<a.length-1,n.transform.matrix);e&&(h(t,e.left,e.bottom,o),function(t,e,n,r,a){switch(e){case"underline":b(t,n.left,Math.round(n.top+r.baseline+r.lineWidth),n.width,1,a);break;case"overline":b(t,n.left,Math.round(n.top),n.width,1,a);break;case"line-through":b(t,n.left,Math.ceil(n.top+r.middle+r.lineWidth),n.width,1,a)}}(o,l,e,r,i))}))}function c(t,e){var n,t=function(t){var e=-1,n=1,r=t.parentNode.childNodes;if(t.parentNode){for(;r[++e]!==t;)1===r[e].nodeType&&n++;return n}return-1}(t);switch(e){case"decimal":n=t;break;case"decimal-leading-zero":n=1===t.toString().length?t="0"+t.toString():t.toString();break;case"upper-roman":n=Y.Generate.ListRoman(t);break;case"lower-roman":n=Y.Generate.ListRoman(t).toLowerCase();break;case"lower-alpha":n=Y.Generate.ListAlpha(t).toLowerCase();break;case"upper-alpha":n=Y.Generate.ListAlpha(t)}return n+". "}function v(t,e,n){var r,a,o,i=e.ctx,l=U(t,"listStyleType");/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(l)&&(r=c(t,l),a=t,o=r,(e=f.createElement("boundelement")).style.display="inline",l=a.style.listStyleType,a.style.listStyleType="none",e.appendChild(f.createTextNode(o)),a.insertBefore(e,a.firstChild),o=p.Bounds(e),a.removeChild(e),a.style.listStyleType=l,o=o,w(i,t,"none",U(t,"color")),"inside"===U(t,"listStylePosition")&&(i.setVariable("textAlign","left"),h(r,n.left,o.bottom,i)))}function k(t){t=e[t];return!(!t||!0!==t.succeeded)&&t.img}function C(t,e){var n=Math.max(t.left,e.left),r=Math.max(t.top,e.top);return{left:n,top:r,width:Math.min(t.left+t.width,e.left+e.width)-n,height:Math.min(t.top+t.height,e.top+e.height)-r}}function T(t,e,n,r,a){var o=y(e,"paddingLeft"),i=y(e,"paddingTop"),l=y(e,"paddingRight"),e=y(e,"paddingBottom");I(t,n,0,0,n.width,n.height,r.left+o+a[3].width,r.top+i+a[0].width,r.width-(a[1].width+a[3].width+o+l),r.height-(a[0].width+a[2].width+i+e))}n.innerHTML="."+m+'-before:before { content: "" !important; display: none !important; }.'+m+'-after:after { content: "" !important; display: none !important; }',a.appendChild(n),e=e||{};var i,N=(i=(Math.sqrt(2)-1)/3*4,function(t,e,n,r){var a=n*i,o=r*i,n=t+n,r=e+r;return{topLeft:S({x:t,y:r},{x:t,y:r-o},{x:n-a,y:e},{x:n,y:e}),topRight:S({x:t,y:e},{x:t+a,y:e},{x:n,y:r-o},{x:n,y:r}),bottomRight:S({x:n,y:e},{x:n,y:e+o},{x:t+a,y:r},{x:t,y:r}),bottomLeft:S({x:n,y:r},{x:n-a,y:r},{x:t,y:e+o},{x:t,y:e})}});function S(o,i,l,s){function c(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}}return{start:o,startControl:i,endControl:l,end:s,subdivide:function(t){var e=c(o,i,t),n=c(i,l,t),r=c(l,s,t),a=c(e,n,t),n=c(n,r,t),t=c(a,n,t);return[S(o,e,a,t),S(t,n,r,s)]},curveTo:function(t){t.push(["bezierCurve",i.x,i.y,l.x,l.y,s.x,s.y])},curveToReversed:function(t){t.push(["bezierCurve",l.x,l.y,i.x,i.y,o.x,o.y])}}}function B(t,e,n,r,a,o,i){0<e[0]||0<e[1]?(t.push(["line",r[0].start.x,r[0].start.y]),r[0].curveTo(t),r[1].curveTo(t)):t.push(["line",o,i]),(0<n[0]||0<n[1])&&t.push(["line",a[0].start.x,a[0].start.y])}function P(t,e,n,r,a,o,i){var l=[];return 0<e[0]||0<e[1]?(l.push(["line",r[1].start.x,r[1].start.y]),r[1].curveTo(l)):l.push(["line",t.c1[0],t.c1[1]]),0<n[0]||0<n[1]?(l.push(["line",o[0].start.x,o[0].start.y]),o[0].curveTo(l),l.push(["line",i[0].end.x,i[0].end.y]),i[0].curveToReversed(l)):(l.push(["line",t.c2[0],t.c2[1]]),l.push(["line",t.c3[0],t.c3[1]])),0<e[0]||0<e[1]?(l.push(["line",a[1].end.x,a[1].end.y]),a[1].curveToReversed(l)):l.push(["line",t.c4[0],t.c4[1]]),l}function R(t,e,n){for(var r,a,o,i,l,s,c,d,h,u,f,p,g,m,y,b,w,x,v,k,C,T,S,R=e.left,M=e.top,E=e.width,I=e.height,L=(S=t,["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){return U(S,"border"+t+"Radius")})),O=(c=L,d=n,h=(s=e).left,u=s.top,f=s.width,p=s.height,g=c[0][0],m=c[0][1],y=c[1][0],b=c[1][1],w=c[2][0],x=c[2][1],v=c[3][0],k=c[3][1],C=f-y,T=p-x,s=f-w,c=p-k,{topLeftOuter:N(h,u,g,m).topLeft.subdivide(.5),topLeftInner:N(h+d[3].width,u+d[0].width,Math.max(0,g-d[3].width),Math.max(0,m-d[0].width)).topLeft.subdivide(.5),topRightOuter:N(h+C,u,y,b).topRight.subdivide(.5),topRightInner:N(h+Math.min(C,f+d[3].width),u+d[0].width,C>f+d[3].width?0:y-d[3].width,b-d[0].width).topRight.subdivide(.5),bottomRightOuter:N(h+s,u+T,w,x).bottomRight.subdivide(.5),bottomRightInner:N(h+Math.min(s,f+d[3].width),u+Math.min(T,p+d[0].width),Math.max(0,w-d[1].width),Math.max(0,x-d[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:N(h,u+c,v,k).bottomLeft.subdivide(.5),bottomLeftInner:N(h+d[3].width,u+c,Math.max(0,v-d[3].width),Math.max(0,k-d[2].width)).bottomLeft.subdivide(.5)}),z={clip:function(t,e,n,r,a){var o=[];switch(U(t,"backgroundClip")){case"content-box":case"padding-box":B(o,r[0],r[1],e.topLeftInner,e.topRightInner,a.left+n[3].width,a.top+n[0].width),B(o,r[1],r[2],e.topRightInner,e.bottomRightInner,a.left+a.width-n[1].width,a.top+n[0].width),B(o,r[2],r[3],e.bottomRightInner,e.bottomLeftInner,a.left+a.width-n[1].width,a.top+a.height-n[2].width),B(o,r[3],r[0],e.bottomLeftInner,e.topLeftInner,a.left+n[3].width,a.top+a.height-n[2].width);break;default:B(o,r[0],r[1],e.topLeftOuter,e.topRightOuter,a.left,a.top),B(o,r[1],r[2],e.topRightOuter,e.bottomRightOuter,a.left+a.width,a.top),B(o,r[2],r[3],e.bottomRightOuter,e.bottomLeftOuter,a.left+a.width,a.top+a.height),B(o,r[3],r[0],e.bottomLeftOuter,e.topLeftOuter,a.left,a.top+a.height)}return o}(t,O,n,L,e),borders:[]},A=0;A<4;A++)if(0<n[A].width){switch(r=R,a=M,o=E,i=I-n[2].width,A){case 0:i=n[0].width,l=P({c1:[r,a],c2:[r+o,a],c3:[r+o-n[1].width,a+i],c4:[r+n[3].width,a+i]},L[0],L[1],O.topLeftOuter,O.topLeftInner,O.topRightOuter,O.topRightInner);break;case 1:l=P({c1:[(r=R+E-n[1].width)+(o=n[1].width),a],c2:[r+o,a+i+n[2].width],c3:[r,a+i],c4:[r,a+n[0].width]},L[1],L[2],O.topRightOuter,O.topRightInner,O.bottomRightOuter,O.bottomRightInner);break;case 2:l=P({c1:[r+o,(a=a+I-n[2].width)+(i=n[2].width)],c2:[r,a+i],c3:[r+n[3].width,a],c4:[r+o-n[3].width,a]},L[2],L[3],O.bottomRightOuter,O.bottomRightInner,O.bottomLeftOuter,O.bottomLeftInner);break;case 3:o=n[3].width,l=P({c1:[r,a+i+n[2].width],c2:[r,a],c3:[r+o,a+n[0].width],c4:[r+o,a+i]},L[3],L[0],O.bottomLeftOuter,O.bottomLeftInner,O.topLeftOuter,O.topLeftInner)}z.borders.push({args:l,color:n[A].color})}return z}function M(t,e){var n=t.drawShape();return e.forEach(function(t,e){n[0===e?"moveTo":t[0]+"To"].apply(null,t.slice(1))}),n}function E(e,t,n){var r=f.createElement("valuewrap");["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"].forEach(function(t){try{r.style[t]=U(e,t)}catch(t){p.log("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}}),r.style.borderColor="black",r.style.borderStyle="solid",r.style.display="block",r.style.position="absolute",!/^(submit|reset|button|text|password)$/.test(e.type)&&"SELECT"!==e.nodeName||(r.style.lineHeight=U(e,"height")),r.style.top=t.top+"px",r.style.left=t.left+"px",t=(t="SELECT"===e.nodeName?(e.options[e.selectedIndex]||0).text:e.value)||e.placeholder,t=f.createTextNode(t),r.appendChild(t),a.appendChild(r),o(e,t,n),a.removeChild(r)}function I(t){t.drawImage.apply(t,Array.prototype.slice.call(arguments,1)),0}function L(t,e){var n=q.getComputedStyle(t,e);if(n&&n.content&&"none"!==n.content&&"-moz-alt-content"!==n.content&&"none"!==n.display){t=n.content+"",e=t.substr(0,1);e===t.substr(t.length-1)&&e.match(/'|"/)&&(t=t.substr(1,t.length-2));var e="url"===t.substr(0,3),r=X.createElement(e?"img":"span");return r.className=m+"-before "+m+"-after",Object.keys(n).filter(l).forEach(function(e){try{r.style[e]=n[e]}catch(t){p.log(["Tried to assign readonly property ",e,"Error:",t])}}),e?r.src=p.parseBackgroundImage(t)[0].args[0]:r.innerHTML=t,r}}function l(t){return isNaN(q.parseInt(t,10))}function O(t,e,n,r){var a=Math.round(r.left+n.left),n=Math.round(r.top+n.top);t.createPattern(e),t.translate(a,n),t.fill(),t.translate(-a,-n)}function z(t,e,n,r,a,o,i,l){var s=[];s.push(["line",Math.round(a),Math.round(o)]),s.push(["line",Math.round(a+i),Math.round(o)]),s.push(["line",Math.round(a+i),Math.round(l+o)]),s.push(["line",Math.round(a),Math.round(l+o)]),M(t,s),t.save(),t.clip(),O(t,e,n,r),t.restore()}function A(t,e,n,r,a){var o=p.BackgroundSize(t,e,r,a),i=p.BackgroundPosition(t,e,r,a,o),t=U(t,"backgroundRepeat").split(",").map(p.trimText);switch(r=function(t,e){if(t.width===e.width&&t.height===e.height)return t;var n=f.createElement("canvas");return n.width=e.width,n.height=e.height,I(n.getContext("2d"),t,0,0,t.width,t.height,0,0,e.width,e.height),n}(r,o),t=t[a]||t[0]){case"repeat-x":z(n,r,i,e,e.left,e.top+i.top,99999,r.height);break;case"repeat-y":z(n,r,i,e,e.left+i.left,e.top,r.width,99999);break;case"no-repeat":z(n,r,i,e,e.left+i.left,e.top+i.top,r.width,r.height);break;default:O(n,r,i,{top:e.top,left:e.left,width:r.width,height:r.height})}}function F(t){return t.replace("px","")}var r,V,D,$=/(matrix)\((.+)\)/;function G(t,e,n,r){var a,o,i,l,s,c,d=(s=e?n.width:Math.max(Math.max(f.body.scrollWidth,f.documentElement.scrollWidth),Math.max(f.body.offsetWidth,f.documentElement.offsetWidth),Math.max(f.body.clientWidth,f.documentElement.clientWidth)),l=e?n.height:Math.max(Math.max(f.body.scrollHeight,f.documentElement.scrollHeight),Math.max(f.body.offsetHeight,f.documentElement.offsetHeight),Math.max(f.body.clientHeight,f.documentElement.clientHeight)),{storage:o=[],width:s,height:l,clip:function(){o.push({type:"function",name:"clip",arguments:arguments})},translate:function(){o.push({type:"function",name:"translate",arguments:arguments})},fill:function(){o.push({type:"function",name:"fill",arguments:arguments})},save:function(){o.push({type:"function",name:"save",arguments:arguments})},restore:function(){o.push({type:"function",name:"restore",arguments:arguments})},fillRect:function(){o.push({type:"function",name:"fillRect",arguments:arguments})},createPattern:function(){o.push({type:"function",name:"createPattern",arguments:arguments})},drawShape:function(){var t=[];return o.push({type:"function",name:"drawShape",arguments:t}),{moveTo:function(){t.push({name:"moveTo",arguments:arguments})},lineTo:function(){t.push({name:"lineTo",arguments:arguments})},arcTo:function(){t.push({name:"arcTo",arguments:arguments})},bezierCurveTo:function(){t.push({name:"bezierCurveTo",arguments:arguments})},quadraticCurveTo:function(){t.push({name:"quadraticCurveTo",arguments:arguments})}}},drawImage:function(){o.push({type:"function",name:"drawImage",arguments:arguments})},fillText:function(){o.push({type:"function",name:"fillText",arguments:arguments})},setVariable:function(t,e){return o.push({type:"variable",name:t,arguments:e}),e}}),h={ctx:d,opacity:(c=e,d.setVariable("globalAlpha",U(t,"opacity")*(c?c.opacity:1))),cssPosition:U(t,"position"),borders:(a=t,["Top","Right","Bottom","Left"].map(function(t){return{width:y(a,"border"+t+"Width"),color:U(a,"border"+t+"Color")}})),transform:r,clip:e&&e.clip?p.Extend({},e.clip):null};return i=t,s=e,d="static"!==(l=h).cssPosition,c=d?U(i,"zIndex"):"auto",r=U(i,"opacity"),e="none"!==U(i,"cssFloat"),l.zIndex=i={zindex:c,children:[]},i.isPositioned=d,i.isFloated=e,i.opacity=r,i.ownStacking="auto"!==c||r<1,s&&s.zIndex.children.push(l),!0===u.useOverflow&&!0===/(hidden|scroll|auto)/.test(U(t,"overflow"))&&!1===/(BODY)/i.test(t.nodeName)&&(h.clip=h.clip?C(h.clip,n):n),h}function W(t,e,n,r){var a,o,i,l,s,c,d=(o=U(a=t,"transform")||U(a,"-webkit-transform")||U(a,"-moz-transform")||U(a,"-ms-transform")||U(a,"-o-transform"),a=(a=U(a,"transform-origin")||U(a,"-webkit-transform-origin")||U(a,"-moz-transform-origin")||U(a,"-ms-transform-origin")||U(a,"-o-transform-origin")||"0px 0px").split(" ").map(F).map(p.asFloat),!o||"none"===o||(o=o.match($))&&"matrix"===o[1]&&(i=o[2].split(",").map(p.trimText).map(p.asFloat)),{origin:a,matrix:i}),h=(l=t,l=(c=d).matrix?p.OffsetBounds(l):p.Bounds(l),c.origin[0]+=l.left,c.origin[1]+=l.top,l),o=G(t,e,h,d),a=o.borders,u=o.ctx,e=(i=a,c=h,l=o.clip,i={left:c.left+i[3].width,top:c.top+i[0].width,width:c.width-(i[1].width+i[3].width),height:c.height-(i[0].width+i[2].width)},l&&(i=C(i,l)),i),d=R(t,h,a),c=g.test(t.nodeName)?"#efefef":U(t,"backgroundColor");switch(M(u,d.clip),u.save(),u.clip(),0<e.height&&0<e.width&&!r?(l=c,b(u,(i=h).left,i.top,i.width,i.height,l),function(t,e,n){for(var r,a=U(t,"backgroundImage"),o=p.parseBackgroundImage(a),i=o.length;i--;){(a=o[i]).args&&0!==a.args.length&&((r=k("url"===a.method?a.args[0]:a.value))?A(t,e,n,r,i):p.log("html2canvas: Error loading background:",a))}}(t,e,u)):r&&(o.backgroundColor=c),u.restore(),d.borders.forEach(function(t){var e,n;e=u,n=t.args,"transparent"!==(t=t.color)&&(e.setVariable("fillStyle",t),M(e,n),e.fill(),0)}),n||(c=o,d=L(s=t,":before"),n=L(s,":after"),(d||n)&&(d&&(s.className+=" "+m+"-before",s.parentNode.insertBefore(d,s),H(d,c,!0),s.parentNode.removeChild(d),s.className=s.className.replace(m+"-before","").trim()),n&&(s.className+=" "+m+"-after",s.appendChild(n),H(n,c,!0),s.removeChild(n),s.className=s.className.replace(m+"-after","").trim()))),t.nodeName){case"IMG":(s=k(t.getAttribute("src")))?T(u,t,s,h,a):p.log("html2canvas: Error loading <img>:"+t.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(t.type)&&0<(t.value||t.placeholder||"").length&&E(t,h,o);break;case"TEXTAREA":0<(t.value||t.placeholder||"").length&&E(t,h,o);break;case"SELECT":0<(t.options||t.placeholder||"").length&&E(t,h,o);break;case"LI":v(t,o,e);break;case"CANVAS":T(u,t,t,h,a)}return o}function H(t,e,n){var r;"none"===U(r=t,"display")||"hidden"===U(r,"visibility")||r.hasAttribute("data-html2canvas-ignore")||(e=W(t,e,n,!1)||e,g.test(t.nodeName)||j(t,e,n))}function j(e,n,r){p.Children(e).forEach(function(t){t.nodeType===t.ELEMENT_NODE?H(t,n,r):t.nodeType===t.TEXT_NODE&&o(e,t,n)})}return r=U(X.documentElement,"backgroundColor"),V=p.isTransparent(r)&&t===X.body,D=W(t,null,!1,V),j(t,D),V&&(r=D.backgroundColor),a.removeChild(n),{backgroundColor:r,stack:D}},Y.Preload=function(i){var a,o,t,e,l={numLoaded:0,numFailed:0,numTotal:0,cleanupDone:!1},s=Y.Util,c=0,n=i.elements[0]||X.body,d=n.ownerDocument,r=n.getElementsByTagName("img"),h=r.length,u=d.createElement("a"),f=(new Image).crossOrigin!==_;function p(){s.log("html2canvas: start: images: "+l.numLoaded+" / "+l.numTotal+" (failed: "+l.numFailed+")"),!l.firstRun&&l.numLoaded>=l.numTotal&&(s.log("Finished loading images: # "+l.numTotal+" (failed: "+l.numFailed+")"),"function"==typeof i.complete&&i.complete(l))}function g(t,e,n){var r,a,o=i.proxy;u.href=t,t=u.href,r="html2canvas_"+c++,n.callbackname=r,-1<o.indexOf("?")?o+="&":o+="?",o+="url="+encodeURIComponent(t)+"&callback="+r,a=d.createElement("script"),q[r]=function(t){"error:"===t.substring(0,6)?(n.succeeded=!1,l.numLoaded++,l.numFailed++,p()):(w(e,n),e.src=t),q[r]=_;try{delete q[r]}catch(t){}a.parentNode.removeChild(a),a=null,delete n.script,delete n.callbackname},a.setAttribute("type","text/javascript"),a.setAttribute("src",o),n.script=a,q.document.body.appendChild(a)}function m(t,e){var n=q.getComputedStyle(t,e),e=n.content;"url"===e.substr(0,3)&&o.loadImage(Y.Util.parseBackgroundImage(e)[0].args[0]),b(n.backgroundImage,t)}function y(t){return t&&t.method&&t.args&&0<t.args.length}function b(t,n){var r;Y.Util.parseBackgroundImage(t).filter(y).forEach(function(t){var e;"url"===t.method?o.loadImage(t.args[0]):t.method.match(/\-?gradient$/)&&(r===_&&(r=Y.Util.Bounds(n)),e=t.value,t=r,(t=Y.Generate.Gradient(e,t))!==_&&(l[e]={img:t,succeeded:!0},l.numTotal++,l.numLoaded++,p()))})}function w(e,n){e.onload=function(){n.timer!==_&&q.clearTimeout(n.timer),l.numLoaded++,n.succeeded=!0,e.onerror=e.onload=null,p()},e.onerror=function(){if("anonymous"===e.crossOrigin&&(q.clearTimeout(n.timer),i.proxy)){var t=e.src;return e=new Image,(n.img=e).src=t,void g(e.src,e,n)}l.numLoaded++,l.numFailed++,n.succeeded=!1,e.onerror=e.onload=null,p()}}for(u.href=q.location.href,a=u.protocol+u.host,o={loadImage:function(t){var e,n,r;t&&l[t]===_&&(e=new Image,t.match(/data:image\/.*;base64,/i)?(e.src=t.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),n=l[t]={img:e},l.numTotal++,w(e,n)):(r=t,u.href=r,u.href=u.href,u.protocol+u.host===a||!0===i.allowTaint?(n=l[t]={img:e},l.numTotal++,w(e,n),e.src=t):f&&!i.allowTaint&&i.useCORS?(e.crossOrigin="anonymous",n=l[t]={img:e},l.numTotal++,w(e,n),"function"==typeof i.imgOverride?e.src=i.imgOverride(t):e.src=t):i.proxy&&(n=l[t]={img:e},l.numTotal++,g(t,e,n))))},cleanupDOM:function(t){var e,n;if(!l.cleanupDone){for(n in t&&"string"==typeof t?s.log("html2canvas: Cleanup because: "+t):s.log("html2canvas: Cleanup after timeout: "+i.timeout+" ms."),l)if(l.hasOwnProperty(n)&&"object"==typeof(e=l[n])&&e.callbackname&&e.succeeded===_){q[e.callbackname]=_;try{delete q[e.callbackname]}catch(t){}e.script&&e.script.parentNode&&(e.script.setAttribute("src","about:blank"),e.script.parentNode.removeChild(e.script)),l.numLoaded++,l.numFailed++,s.log("html2canvas: Cleaned up failed img: '"+n+"' Steps: "+l.numLoaded+" / "+l.numTotal)}q.stop!==_?q.stop():X.execCommand!==_&&X.execCommand("Stop",!1),X.close!==_&&X.close(),l.cleanupDone=!0,t&&"string"==typeof t||p()}},renderingDone:function(){e&&q.clearTimeout(e)}},0<i.timeout&&(e=q.setTimeout(o.cleanupDOM,i.timeout)),s.log("html2canvas: Preload starts: finding background-images"),l.firstRun=!0,function t(e){var n,r=!1;try{s.Children(e).forEach(t)}catch(t){}try{r=e.nodeType}catch(t){r=!1,s.log("html2canvas: failed to access some element's nodeType - Exception: "+t.message)}if(1===r||r===_){m(n=e,":before"),m(n,":after");try{b(s.getCSS(e,"backgroundImage"),e)}catch(t){s.log("html2canvas: failed to get background-image - Exception: "+t.message)}b(e)}}(n),s.log("html2canvas: Preload: Finding images"),t=0;t<h;t+=1)o.loadImage(r[t].getAttribute("src"));return l.firstRun=!1,s.log("html2canvas: Preload: Done."),l.numTotal===l.numLoaded&&p(),o},Y.Renderer=function(t,n){return function(t){var e;if("string"==typeof n.renderer&&Y.Renderer[t]!==_)e=Y.Renderer[t](n);else{if("function"!=typeof t)throw new Error("Unknown renderer");e=t(n)}if("function"!=typeof e)throw new Error("Invalid renderer defined");return e}(n.renderer)(t,n,X,(e=t.stack,l=[],function e(t,n,r){var a="auto"===n.zIndex.zindex?0:Number(n.zIndex.zindex),o=t,i=n.zIndex.isPositioned,l=n.zIndex.isFloated,s={node:n},c=r;n.zIndex.ownStacking?(o=s.context={"!":[{node:n,children:[]}]},c=_):(i||l)&&(c=s.children=[]),0===a&&r?r.push(s):(t[a]||(t[a]=[]),t[a].push(s)),n.zIndex.children.forEach(function(t){e(o,t,c)})}(r={},e),function o(i){Object.keys(i).sort().forEach(function(t){var e=[],n=[],r=[],a=[];i[t].forEach(function(t){(t.node.zIndex.isPositioned||t.node.zIndex.opacity<1?r:t.node.zIndex.isFloated?n:e).push(t)}),function e(t){t.forEach(function(t){a.push(t),t.children&&e(t.children)})}(e.concat(n,r)),a.forEach(function(t){t.context?o(t.context):l.push(t.node)})})}(r),l),Y);var e,r,l},Y.Util.Support=function(t,r){return{rangeBounds:(a=!1,r.createRange&&(e=r.createRange()).getBoundingClientRect&&((n=r.createElement("boundtest")).style.height="123px",n.style.display="block",r.body.appendChild(n),e.selectNode(n),123===e.getBoundingClientRect().height&&(a=!0),r.body.removeChild(n)),a),svgRendering:t.svgRendering&&function(){var t=new Image,e=r.createElement("canvas"),n=e.getContext!==_&&e.getContext("2d");if(!1===n)return!1;e.width=e.height=10,t.src=["data:image/svg+xml,","<svg xmlns='http://www.w3.org/2000/svg' width='10' height='10'>","<foreignObject width='10' height='10'>","<div xmlns='http://www.w3.org/1999/xhtml' style='width:10;height:10;'>","sup","</div>","</foreignObject>","</svg>"].join("");try{n.drawImage(t,0,0),e.toDataURL()}catch(t){return!1}return Y.Util.log("html2canvas: Parse: SVG powered rendering available"),!0}()};var e,n,a},q.html2canvas=function(t,e){var n,r={logging:!1,elements:t=t.length?t:[t],background:"#fff",proxy:null,timeout:0,useCORS:!1,allowTaint:!1,svgRendering:!1,ignoreElements:"IFRAME|OBJECT|PARAM",useOverflow:!0,letterRendering:!1,chinese:!1,imgOverride:null,width:null,height:null,taintTest:!0,renderer:"Canvas"},r=Y.Util.Extend(e,r);return Y.logging=r.logging,r.complete=function(t){"function"==typeof r.onpreloaded&&!1===r.onpreloaded(t)||(n=Y.Parse(t,r),"function"==typeof r.onparsed&&!1===r.onparsed(n)||(n=Y.Renderer(n,r),"function"==typeof r.onrendered&&r.onrendered(n)))},q.setTimeout(function(){Y.Preload(r)},0),{render:function(t,e){return Y.Renderer(t,Y.Util.Extend(e,r))},parse:function(t,e){return Y.Parse(t,Y.Util.Extend(e,r))},preload:function(t){return Y.Preload(Y.Util.Extend(t,r))},log:Y.Util.log}},q.html2canvas.log=Y.Util.log,q.html2canvas.Renderer={Canvas:_},Y.Renderer.Canvas=function(a){a=a||{};var o=X,i=[],l=X.createElement("canvas"),s=l.getContext("2d"),c=Y.Util,d=a.canvas||o.createElement("canvas");function h(t,e){switch(e.type){case"variable":t[e.name]=e.arguments;break;case"function":switch(e.name){case"createPattern":if(0<e.arguments[0].width&&0<e.arguments[0].height)try{t.fillStyle=t.createPattern(e.arguments[0],"repeat")}catch(t){c.log("html2canvas: Renderer: Error creating pattern",t.message)}break;case"drawShape":n=t,r=e.arguments,n.beginPath(),r.forEach(function(t){n[t.name].apply(n,t.arguments)}),n.closePath();break;case"drawImage":if(0<e.arguments[8]&&0<e.arguments[7]&&(!a.taintTest||a.taintTest&&function(t){if(-1===i.indexOf(t.arguments[0].src)){s.drawImage(t.arguments[0],0,0);try{s.getImageData(0,0,1,1)}catch(t){return l=o.createElement("canvas"),void(s=l.getContext("2d"))}i.push(t.arguments[0].src)}return 1}(e)))if("CANVAS"==e.arguments[0].tagName)try{e.arguments[0].toDataURL("image/png"),t.drawImage.apply(t,e.arguments)}catch(t){}else t.drawImage.apply(t,e.arguments),t.canvas.toDataURL("image/png");break;default:t[e.name].apply(t,e.arguments)}}var n,r}return function(t,e,n,r,a){var o,i=d.getContext("2d"),l=t.stack;return d.width=d.style.width=e.width||l.ctx.width,d.height=d.style.height=e.height||l.ctx.height,o=i.fillStyle,i.fillStyle=c.isTransparent(l.backgroundColor)&&e.background!==_?e.background:t.backgroundColor,i.fillRect(0,0,d.width,d.height),i.fillStyle=o,r.forEach(function(t){i.textBaseline="bottom",i.save(),t.transform.matrix&&(i.translate(t.transform.origin[0],t.transform.origin[1]),i.transform.apply(i,t.transform.matrix),i.translate(-t.transform.origin[0],-t.transform.origin[1])),t.clip&&(i.beginPath(),i.rect(t.clip.left,t.clip.top,t.clip.width,t.clip.height),i.clip()),t.ctx.storage&&t.ctx.storage.forEach(function(t){h(i,t)}),i.restore()}),c.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===e.elements.length&&"object"==typeof e.elements[0]&&"BODY"!==e.elements[0].nodeName?(e=a.Util.Bounds(e.elements[0]),(n=n.createElement("canvas")).width=Math.ceil(e.width),n.height=Math.ceil(e.height),(i=n.getContext("2d")).drawImage(d,e.left,e.top,e.width,e.height,0,0,e.width,e.height),d=null,n):d}}}(window,document);